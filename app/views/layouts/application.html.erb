<!DOCTYPE html>
<html>
  <head>
    <title>Hospital Management System</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>

  <body>
    <div class="container mt-4">
      <h1>🏥 Hospital Management System</h1>
      <hr>

      <%= yield %>

    </div>

    <!-- 로그인 모달 -->
    <div class="modal fade" id="loginModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">로그인</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <%= form_with url: user_session_path, method: :post, data: { turbo: false }, class: "needs-validation", novalidate: true do |f| %>
              <div class="mb-3">
                <%= f.label :email, "이메일", class: "form-label" %>
                <%= f.email_field :email, class: "form-control", required: true, placeholder: "이메일을 입력하세요" %>
              </div>
              <div class="mb-3">
                <%= f.label :password, "비밀번호", class: "form-label" %>
                <%= f.password_field :password, class: "form-control", required: true, placeholder: "비밀번호를 입력하세요" %>
              </div>
              <div class="mb-3 form-check">
                <%= f.check_box :remember_me, class: "form-check-input" %>
                <%= f.label :remember_me, "로그인 상태 유지", class: "form-check-label" %>
              </div>
              <div class="d-grid">
                <%= f.submit "로그인", class: "btn btn-primary" %>
              </div>
            <% end %>

            <div class="text-center mt-3">
              <small class="text-muted">
                계정이 없으신가요?
                <a href="#" data-bs-toggle="modal" data-bs-target="#signupModal" data-bs-dismiss="modal">회원가입</a>
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 회원가입 모달 -->
    <div class="modal fade" id="signupModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">회원가입</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <%= form_with url: user_registration_path, method: :post, data: { turbo: false }, class: "needs-validation", novalidate: true do |f| %>
              <div class="mb-3">
                <%= f.label :name, "이름", class: "form-label" %>
                <%= f.text_field :name, class: "form-control", required: true, placeholder: "이름을 입력하세요" %>
              </div>
              <div class="mb-3">
                <%= f.label :email, "이메일", class: "form-label" %>
                <%= f.email_field :email, class: "form-control", required: true, placeholder: "이메일을 입력하세요" %>
              </div>
              <div class="mb-3">
                <%= f.label :password, "비밀번호", class: "form-label" %>
                <%= f.password_field :password, class: "form-control", required: true, placeholder: "비밀번호를 입력하세요" %>
              </div>
              <div class="mb-3">
                <%= f.label :password_confirmation, "비밀번호 확인", class: "form-label" %>
                <%= f.password_field :password_confirmation, class: "form-control", required: true, placeholder: "비밀번호를 다시 입력하세요" %>
              </div>
              <div class="d-grid">
                <%= f.submit "회원가입", class: "btn btn-success" %>
              </div>
            <% end %>

            <div class="text-center mt-3">
              <small class="text-muted">
                이미 계정이 있으신가요?
                <a href="#" data-bs-toggle="modal" data-bs-target="#loginModal" data-bs-dismiss="modal">로그인</a>
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
